# Security Policy

## Поддерживаемые версии

Мы предоставляем обновления безопасности для следующих версий:

| Версия | Поддержка          |
| ------ | ------------------ |
| 1.0.x  | :white_check_mark: |
| < 1.0  | :x:                |

## Сообщение об уязвимостях

Если вы обнаружили уязвимость в безопасности, пожалуйста, **НЕ** создавайте публичный Issue.

Вместо этого:

1. Отправьте email на security@calorio.app
2. Укажите подробное описание уязвимости
3. Приложите шаги для воспроизведения (если возможно)
4. Укажите потенциальное влияние

### Что включить в отчёт

- Тип уязвимости (SQL injection, XSS, CSRF, и т.д.)
- Полные пути к файлам с уязвимым кодом
- Расположение затронутого кода (тег, ветка, коммит, или прямая ссылка)
- Любая специальная конфигурация, необходимая для воспроизведения
- Пошаговые инструкции для воспроизведения
- Proof-of-concept или эксплойт код (если возможно)
- Влияние уязвимости, включая то, как злоумышленник может её использовать

### Процесс обработки

1. **Подтверждение получения** - в течение 24 часов
2. **Первоначальная оценка** - в течение 72 часов
3. **Исправление** - в зависимости от серьёзности:
   - Критическая: 1-7 дней
   - Высокая: 7-14 дней
   - Средняя: 14-30 дней
   - Низкая: 30-90 дней
4. **Публикация патча** - после исправления
5. **Публичное раскрытие** - через 90 дней после исправления или по согласованию

### Награды

Мы не предлагаем денежные вознаграждения, но:

- Ваше имя будет упомянуто в CHANGELOG (если вы согласны)
- Благодарность в Security Advisory
- Наша искренняя признательность!

## Известные уязвимости

Список известных уязвимостей и их статус можно найти в [Security Advisories](https://github.com/yourusername/calorio/security/advisories).

## Безопасные практики

### Для пользователей

1. **Используйте сильные пароли**
   - Минимум 8 символов
   - Комбинация букв, цифр и специальных символов
   - Не используйте один пароль для нескольких сервисов

2. **Храните токены в безопасности**
   - Не передавайте access токены по незащищённым каналам
   - Используйте HTTPS для всех запросов
   - Не храните токены в localStorage (используйте httpOnly cookies)

3. **Регулярно обновляйте приложение**
   - Следите за обновлениями безопасности
   - Применяйте патчи как можно скорее

### Для разработчиков

1. **Никогда не коммитьте секреты**
   - Используйте `.env` файлы
   - Добавьте `.env` в `.gitignore`
   - Используйте переменные окружения

2. **Валидируйте все входные данные**
   - Используйте сериализаторы DRF
   - Проверяйте типы данных
   - Санитизируйте пользовательский ввод

3. **Используйте параметризованные запросы**
   - Всегда используйте Django ORM
   - Избегайте raw SQL запросов
   - Если необходимо raw SQL, используйте параметры

4. **Защищайте от CSRF**
   - Используйте CSRF токены
   - Проверяйте Origin headers
   - Используйте SameSite cookies

5. **Настройте security headers**
   - X-Frame-Options: DENY
   - X-Content-Type-Options: nosniff
   - Strict-Transport-Security
   - Content-Security-Policy

6. **Ограничивайте rate limiting**
   - Используйте throttling для всех эндпоинтов
   - Особенно для аутентификации
   - Защищайте от brute force атак

7. **Логируйте безопасность**
   - Логируйте все попытки входа
   - Логируйте изменения чувствительных данных
   - Не логируйте пароли и токены

8. **Регулярно обновляйте зависимости**
   - Используйте `pip-audit` или `safety`
   - Следите за CVE
   - Обновляйте зависимости с уязвимостями

## Compliance

### GDPR

Приложение соответствует требованиям GDPR:

- Пользователи могут запросить удаление данных
- Пользователи могут экспортировать данные
- Персональные данные шифруются
- Есть Privacy Policy

### OWASP Top 10

Мы следуем рекомендациям [OWASP Top 10](https://owasp.org/www-project-top-ten/):

1. ✅ Injection - защита через ORM
2. ✅ Broken Authentication - JWT с blacklist
3. ✅ Sensitive Data Exposure - шифрование паролей
4. ✅ XML External Entities (XXE) - не используем XML
5. ✅ Broken Access Control - проверка прав доступа
6. ✅ Security Misconfiguration - правильные настройки
7. ✅ Cross-Site Scripting (XSS) - санитизация ввода
8. ✅ Insecure Deserialization - используем JSON
9. ✅ Using Components with Known Vulnerabilities - регулярные обновления
10. ✅ Insufficient Logging & Monitoring - логирование всех действий

## Контакты

- Email: security@calorio.app
- PGP Key: [Доступен по запросу]

## История изменений

### 2024-12-09
- Первая версия Security Policy

