# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ REST API —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–¥—Å—á—ë—Ç–∞ –∫–∞–ª–æ—Ä–∏–π

## –°—Ç–∞—Ç—É—Å: –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**
   - pytest, pytest-django, pytest-cov —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω pytest.ini
   - –°–æ–∑–¥–∞–Ω conftest.py —Å –±–∞–∑–æ–≤—ã–º–∏ —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏

2. **–¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–†–∞–∑–¥–µ–ª 1)**
   - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `tests/test_auth_comprehensive.py` —Å 39 —Ç–µ—Å—Ç–∞–º–∏
   - 9 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
   - 25 —Ç–µ—Å—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∏–∫—Å—Ç—É—Ä–∞–º–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–æ–≤)

3. **–¢–µ—Å—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è (–†–∞–∑–¥–µ–ª 2)**
   - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `tests/test_profile_comprehensive.py` —Å 27 —Ç–µ—Å—Ç–∞–º–∏
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### üîß –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º—ã –≤ —Ç–µ—Å—Ç–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
1. –§–∏–∫—Å—Ç—É—Ä–∞ `registered_user` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
2. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –æ–∂–∏–¥–∞—é—Ç –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API
3. –¢–µ—Å—Ç—ã —Å –¥–ª–∏–Ω–Ω—ã–º email –ø–∞–¥–∞—é—Ç —Å 500 –æ—à–∏–±–∫–æ–π (–Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–¥–µ)
4. –¢–µ—Å—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ `/api/auth/token/refresh/`

#### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –∫–æ–¥–µ:
1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö email (–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 400 –≤–º–µ—Å—Ç–æ 500)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ —Ç–æ–∫–µ–Ω–∞ refresh (–º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ)

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ç–µ—Å—Ç–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –≤ API

2. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:**
   - –ë–ª—é–¥–∞ (102 —Ç–µ—Å—Ç–∞) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—Å–æ–∫–∏–π
   - –¶–µ–ª–∏ –ö–ë–ñ–£ (54 —Ç–µ—Å—Ç–∞) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—Å–æ–∫–∏–π
   - –î–Ω–∏ (18 —Ç–µ—Å—Ç–æ–≤) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å—Ä–µ–¥–Ω–∏–π
   - –ü–æ–¥–ø–∏—Å–∫–∏ (104 —Ç–µ—Å—Ç–∞) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å—Ä–µ–¥–Ω–∏–π
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (24 —Ç–µ—Å—Ç–∞) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—Å–æ–∫–∏–π
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (15 —Ç–µ—Å—Ç–æ–≤) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—Å–æ–∫–∏–π

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã**

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ .gitignore
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ throttling
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
export SECRET_KEY='test-secret-key'
export DEBUG='True'
pytest -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/test_auth_comprehensive.py -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=. --cov-report=html
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@pytest.mark.django_db`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏–∑ conftest.py –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∫ —É—Å–ø–µ—à–Ω—ã–µ, —Ç–∞–∫ –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

